# 🚀 发布指南

本文档描述了浏览器录屏助手扩展的发布流程和注意事项。

## 📋 发布前准备

### 1. 代码检查

```bash
# 类型检查
npm run compile

# 代码风格检查
npm run lint

# 功能测试
npm test
```

### 2. 版本管理

```bash
# 更新版本号（自动同步到所有配置文件）
npm run release:patch  # 1.0.0 -> 1.0.1
npm run release:minor  # 1.0.0 -> 1.1.0
npm run release:major  # 1.0.0 -> 2.0.0
```

### 3. 构建测试

```bash
# 清理之前的构建
npm run clean

# 构建所有版本
npm run build:all

# 验证构建结果
ls -la dist/
```

## 🏪 商店发布

### Chrome Web Store

#### 准备材料

1. **扩展包**：`npm run zip:chrome` 生成的 ZIP 文件
2. **图标**：128x128px 的高清图标
3. **截图**：1280x800px 或 640x400px 的功能截图
4. **商店图标**：440x280px 的推广图片
5. **描述文本**：详细的功能说明（支持多语言）

#### 发布步骤

1. 登录 [Chrome Web Store 开发者控制台](https://chrome.google.com/webstore/devconsole)
2. 点击"新增项目"
3. 上传 ZIP 文件
4. 填写商店信息：
   - 详细说明
   - 简短说明
   - 类别：生产力工具
   - 语言：中文（简体）、English
5. 上传图片素材
6. 设置定价和分发（免费）
7. 隐私政策声明
8. 提交审核

#### 审核要点

- ✅ 权限使用说明清晰
- ✅ 功能描述准确
- ✅ 截图展示真实功能
- ✅ 隐私政策合规
- ✅ 无恶意代码

### Firefox Add-ons

#### 准备材料

1. **扩展包**：`npm run zip:firefox` 生成的 ZIP 文件
2. **图标**：64x64px 和 128x128px 的图标
3. **截图**：功能截图（建议多张）
4. **描述文本**：详细的功能说明

#### 发布步骤

1. 登录 [Firefox 开发者中心](https://addons.mozilla.org/developers/)
2. 点击"Submit a New Add-on"
3. 选择"On this site"
4. 上传 ZIP 文件
5. 填写附加组件信息：
   - 名称和摘要
   - 详细描述
   - 类别：其他
   - 标签：screen recording, productivity
6. 上传图标和截图
7. 选择许可证
8. 提交审核

#### 审核要点

- ✅ manifest.json 格式正确
- ✅ 权限声明合理
- ✅ 代码质量良好
- ✅ 功能与描述一致
- ✅ 无安全风险

## 🔄 版本更新流程

### 准备更新

1. **更新日志**：记录新功能和 Bug 修复
2. **版本号**：遵循语义化版本规范
3. **测试验证**：确保新版本稳定可用
4. **向后兼容**：检查配置文件兼容性

### 发布更新

```bash
# 1. 更新版本
npm version patch  # 或 minor/major

# 2. 构建新版本
npm run package

# 3. 上传到商店
# Chrome: 上传新的ZIP到现有项目
# Firefox: 上传新版本到现有附加组件
```

### 灰度发布

1. **Chrome**：

   - 设置发布百分比（10% -> 50% -> 100%）
   - 监控用户反馈和错误报告
   - 逐步扩大发布范围

2. **Firefox**：
   - 提交审核后等待自动发布
   - 监控附加组件评分和评论
   - 准备热修复版本

## 📊 发布后监控

### 关键指标

- **安装量**：每日新增安装数
- **活跃用户**：日活跃用户数
- **评分**：商店评分和评论
- **错误率**：错误报告数量
- **卸载率**：用户卸载比例

### 反馈处理

1. **商店评论**：及时回复用户问题
2. **GitHub Issues**：技术问题跟踪处理
3. **崩溃报告**：分析错误日志
4. **功能请求**：收集用户需求

## 🛠️ 紧急修复

### 热修复流程

```bash
# 1. 创建修复分支
git checkout -b hotfix/critical-bug

# 2. 修复问题
# ... 代码修改 ...

# 3. 快速测试
npm run build:all

# 4. 发布补丁版本
npm run release:patch

# 5. 紧急提交审核
```

### 回滚机制

1. **Chrome**：可以快速切换到上一个版本
2. **Firefox**：需要提交新版本覆盖
3. **备份**：保留最近 3 个稳定版本的包

## 📝 发布检查清单

### 发布前

- [ ] 代码审查完成
- [ ] 功能测试通过
- [ ] 版本号已更新
- [ ] 更新日志已记录
- [ ] 构建文件无错误
- [ ] 图标和截图准备完毕

### 商店提交

- [ ] Chrome Web Store 已提交
- [ ] Firefox Add-ons 已提交
- [ ] 商店信息填写完整
- [ ] 隐私政策已确认
- [ ] 权限说明已添加

### 发布后

- [ ] 监控安装数据
- [ ] 检查用户反馈
- [ ] 响应技术支持
- [ ] 准备下个版本计划

## 🎯 发布计划

### 版本命名规则

- **主版本（1.0.0）**：重大功能更新或架构变更
- **次版本（1.1.0）**：新功能添加或重要改进
- **补丁版本（1.0.1）**：Bug 修复和小幅优化

### 发布节奏

- **补丁版本**：发现重要 Bug 时立即发布
- **次版本**：每 2-4 周发布一次
- **主版本**：每 3-6 个月发布一次

### 支持政策

- **最新版本**：提供完整技术支持
- **次版本**：提供重要安全更新
- **主版本**：支持最近 2 个主版本

---

**重要提醒**：

- 发布前务必在多个浏览器版本测试
- 保持与用户的良好沟通
- 遵守各平台的政策要求
- 建立完善的错误监控机制
