# 产品文档

## 产品名称

GifShot - 屏幕录制 GIF 插件

## 产品简介

GifShot 是一款 Chrome 浏览器插件，支持一键录制当前标签页、桌面或应用窗口的屏幕内容，并将其保存为 GIF 动图，便于分享和传播。

## 主要功能

1. **屏幕录制**
   - 支持录制当前标签页、整个桌面或指定应用窗口
2. **GIF 生成**
   - 实时或录制结束后将视频内容转码为 GIF 动图
3. **本地保存**
   - 支持将生成的 GIF 文件保存到本地
4. **录制时长控制**
   - 用户可自定义录制时长（1-60秒）或手动停止录制
5. **录制区域选择**（已实现）
   - 支持选择录制区域（如全屏、窗口、标签页）
6. **简单编辑**（待扩展）
   - 支持裁剪、调整帧率、添加文字等简单编辑功能

## 目标用户

- 内容创作者、产品经理、开发者、教师等需要快速录制屏幕并生成 GIF 的用户

## 使用场景

- 制作产品演示动图
- 录制操作教程
- 捕捉网页趣味瞬间

---

# 架构设计

## 技术选型

- **前端框架**: Vue 3 + TypeScript
- **样式处理**: Less
- **构建工具**: Vite
- **依赖管理**: Yarn
- **Chrome 插件 API**: Manifest V3
- **GIF 处理**: gif.js

## 主要模块

### 项目结构
```
gif_screenshot/
├── src/                    # 源码目录
│   ├── components/         # Vue组件
│   │   └── Popup.vue      # 弹窗主组件（已实现）
│   │   └── Record.vue     # 录制主组件（已实现）
│   ├── utils/             # 工具函数
│   │   └── gifGenerator.ts # GIF生成器（已实现）
│   ├── styles/            # 样式文件
│   │   └── popup.less     # 弹窗样式（已实现）
│   ├── types/             # 类型定义
│   │   └── gif.d.ts       # gif.js类型定义（已实现）
│   ├── public/            # 静态资源
│   │   └── icons/         # 插件图标（需要真实图标文件）
│   ├── popup.html         # 弹窗页面（已实现）
│   ├── popup.ts           # 弹窗入口（已实现）
│   ├── background.ts      # 后台脚本（已实现）
│   └── manifest.json      # 插件配置（已实现）
├── extension/             # 构建输出目录
├── package.json           # 项目配置（已实现）
├── vite.config.ts         # 构建配置（已实现）
├── tsconfig.json          # TypeScript配置（已实现）
└── README.md              # 项目文档（已实现）
```

### 主要流程

1. 用户点击插件图标，弹出 popup.html
2. 选择录制类型（标签页/桌面/窗口），设置录制时长
3. 通过 `navigator.mediaDevices.getDisplayMedia()` 获取屏幕流
4. 使用 `MediaRecorder` 录制视频帧
5. 录制过程中实时显示计时器和录制状态
6. 录制结束后，使用 gif.js 将视频转换为 GIF
7. 显示 GIF 预览，用户可选择保存或重新录制
8. 点击保存后，通过浏览器下载 API 保存 GIF 文件

## 关键技术点

### 屏幕录制
- 使用 `getDisplayMedia` API 获取屏幕流
- 支持多种媒体源：tab（标签页）、screen（桌面）、window（窗口）
- 通过 `MediaRecorder` 录制 WebM 格式视频

### 视频转 GIF
- 使用 gif.js 库进行客户端 GIF 生成
- 通过 Canvas 逐帧绘制视频内容
- 可调整帧率（默认10fps）和质量参数

### 性能优化
- 异步处理视频转换，避免阻塞用户界面
- 合理的帧率设置平衡质量和文件大小
- 及时释放媒体资源和对象URL

### 兼容性
- 基于 Chrome Extension Manifest V3
- 支持 Chrome 88+ 和其他 Chromium 内核浏览器
- 使用现代 Web API，确保功能稳定性

## 已实现功能

✅ 基础项目结构搭建
✅ Chrome 插件配置文件
✅ Vue 3 + TypeScript 开发环境
✅ 屏幕录制功能（标签页、桌面、窗口）
✅ GIF 生成和转换
✅ 录制时长控制
✅ 实时录制状态显示
✅ GIF 预览和保存
✅ 现代化用户界面
✅ 构建和打包配置

## 待完善功能

🔄 插件图标文件（需要设计师提供）
🔄 更多编辑功能（裁剪、文字添加等）
🔄 录制质量设置
🔄 快捷键支持
🔄 录制历史管理

## 安装和使用

### 开发环境
1. `yarn install` - 安装依赖
2. `yarn build` - 构建项目
3. 在 Chrome 中加载 `extension` 文件夹作为未打包的扩展程序

### 用户使用
1. 点击浏览器工具栏中的 GifShot 图标
2. 选择录制类型和时长
3. 开始录制
4. 预览并保存生成的 GIF
