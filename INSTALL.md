# GifShot Chrome 扩展安装指南

## 📋 系统要求

- Chrome 浏览器 88+ 版本
- Windows 10/11 (64-bit) 或 MacOS 10.15+ 或 Linux
- 至少 4GB 内存（推荐 8GB）
- 支持硬件加速的显卡（可选）

## 🚀 快速安装

### 方法一：开发者模式安装

1. **下载扩展**
   ```bash
   git clone <repository-url>
   cd gifshot-chrome-extension
   npm install
   npm run build
   ```

2. **加载扩展**
   - 打开 Chrome 浏览器
   - 访问 `chrome://extensions/`
   - 开启"开发者模式"（右上角开关）
   - 点击"加载已解压的扩展程序"
   - 选择 `build/chrome-mv3-prod` 目录

3. **验证安装**
   - 查看扩展图标是否出现在工具栏
   - 点击图标测试弹窗是否正常

### 方法二：打包安装

1. **生成扩展包**
   ```bash
   npm run package
   ```

2. **安装扩展包**
   - 在 `chrome://extensions/` 页面
   - 将生成的 `.zip` 文件拖拽到页面中

## 🔧 开发环境配置

### 环境准备
```bash
# 安装 Node.js 16+
node --version  # 确认版本 >= 16

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

### 热重载开发
- 开发模式下，代码更改会自动重载扩展
- 监控控制台输出以获取构建状态
- 推荐使用 Chrome DevTools 进行调试

## 🎯 功能验证

### 基础功能测试
1. **录制测试**
   - 点击扩展图标
   - 选择"标签页录制"
   - 授权屏幕共享权限
   - 验证录制界面正常显示

2. **GIF 生成测试**
   - 进行 3-5 秒短录制
   - 确认 GIF 生成成功
   - 检查文件大小合理（通常 < 5MB）

### 性能验证
- 内存使用：录制时 < 500MB
- CPU 使用：转换时 < 80%
- 生成时间：5秒视频约需 10-20 秒处理

## 🐛 常见问题排查

### GIF 生成超时问题

**症状**：GIF 生成过程中出现超时错误

**原因分析**：
- 视频分辨率过大（> 1920x1080）
- 录制时长过长（> 10 秒）
- 系统内存不足
- Worker 脚本加载失败

**解决方案**：

1. **检查 Worker 文件**
   ```bash
   # 确认文件存在
   ls build/chrome-mv3-prod/assets/gif.worker.js
   
   # 检查 manifest.json 配置
   grep -A3 "web_accessible_resources" build/chrome-mv3-prod/manifest.json
   ```

2. **优化录制参数**
   - 录制时长限制在 8 秒内
   - 降低录制分辨率（最大 600x400）
   - 减少帧率到 6 FPS

3. **系统优化**
   - 关闭其他大内存应用
   - 确保至少 2GB 可用内存
   - 使用 SSD 硬盘以提高 I/O 性能

### 权限问题

**症状**：无法访问屏幕录制或下载功能

**解决方案**：
1. 确认扩展权限已授权
2. 重新安装扩展
3. 清除浏览器缓存和存储

### 性能问题

**症状**：生成 GIF 速度慢或浏览器卡顿

**优化建议**：
1. 降低 GIF 质量设置（quality: 15-20）
2. 减少 Worker 数量（workers: 2-4）
3. 启用硬件加速
4. 关闭浏览器其他标签页

## 📊 性能基准

### 推荐配置
- **短视频** (≤ 3秒)：质量 10，6 FPS，600x400
- **中等视频** (3-6秒)：质量 15，6 FPS，480x320
- **长视频** (6-8秒)：质量 20，5 FPS，400x300

### 预期性能
| 录制时长 | 分辨率 | 生成时间 | 文件大小 |
|---------|--------|----------|----------|
| 3 秒    | 600x400| 5-10 秒  | 1-3 MB   |
| 5 秒    | 480x320| 10-15 秒 | 2-5 MB   |
| 8 秒    | 400x300| 15-25 秒 | 3-8 MB   |

## 🔍 调试技巧

### 开发者工具
1. **后台页面调试**
   - 访问 `chrome://extensions/`
   - 点击"检查视图 > 背景页"

2. **弹窗调试**
   - 右键扩展图标
   - 选择"检查"

3. **标签页调试**
   - 在录制页面按 F12
   - 查看控制台日志

### 日志分析
```javascript
// 在控制台中运行，查看详细日志
console.log("GIF 生成状态:", chrome.storage.local.get(['gif_status']));

// 清除存储数据
chrome.storage.local.clear();
```

## 📞 技术支持

如果遇到问题：
1. 检查控制台错误日志
2. 确认系统要求是否满足
3. 尝试重新安装扩展
4. 提交 Issue 并附上错误日志

---

**注意**：本扩展在开发模式下可能会显示"未从 Chrome Web Store 安装"的警告，这是正常现象。 